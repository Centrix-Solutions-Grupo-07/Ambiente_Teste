<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../assets/icon/favicon.ico">
    <title>Dashboard - Alertas e Rede</title>
    <link rel="stylesheet" href="../css/dash_rede.css">
    <link rel="stylesheet" href="../css/barra_lateral.css">
    <script src="../js/andar.js"></script>
    <script src="../js/nivelAcesso.js"></script>
    <script src="../js/dash_rede_graph.js"></script>
    <script src="../js/notificacao_rede.js"></script>
</head>

<body onload="buscarAndares(), listarLateral(), graficoStacked(), obterKpis()">
    <div class="container_principal">
        <div class="barra_lateral" id="lateral_barra"></div>
        <div class="area_dash">
            <div class="dash_superior">
                <div class="titulo">
                    <span class="text_titulo">Notificações e Uso Geral da Rede</span>
                </div>
                <div class="dash_perfil">
                    <div class="perfil_nome">
                        <span class="text_perfilNome" id="nomeFuncionario">Nishikigi Chisato</span>
                        <span class="text_perfilEmail" id="emailFuncionario">nishikigi.chisato@gmail.com</span>
                    </div>
                    <div class="perfil_img">
                        <div class="perfil_imagem"></div>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="12" viewBox="0 0 18 12"
                                fill="none">
                                <path d="M1 1.75L9 10.25L17 1.75" stroke="white" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
            <!-- COMECO DIV CENTRAL -->
            <div class="div_central">
                <div class="notificacoes">
                    <div class="notificacoes_titulo">
                        <img src="../assets/imgs/sino_dash.png" alt="">
                        <span class="text_titulo">Notificações</span>
                    </div>
                    <div class="scroll_alertas">
                        <!-- JAVASCRIPT ALERTA -->
                        <div id="cards_container" class="cards-container">
                        </div>
                        <!-- JAVASCRIPT ALERTA -->
                    </div>
                </div>
                <div class="graficos_kpi">
                    <div class="graficos">
                        <div class="alertas_mes">
                            <span class="text_alertas">Alertas do último mês </span>
                            <canvas id="Stacked"></canvas>
                        </div>
                        <div class="alertas_andar">
                            <div class="titulo_select">
                                <span class="text_alertas">Últimos alertas do andar</span>
                                <div class="custom_select" style="width:109px;">
                                    <select onchange="graficoMeiaLua(),limparNotificacaoAndar(),obterdados()" name="andares" class="select_andares"
                                        id="andares"></select>
                                </div>
                            </div>
                            <div>
                                <canvas id="meia_lua"></canvas>
                            </div>
                        </div>
                    </div>
                    <br><br>
                    <div class="kpis_computador">
                        <div class="kpi_card">
                            <span>Computador com mais alertas de atenção na última semana</span><br>
                            <span class="cuidado_text" id="kpiAtencao">$Computador 001</span>
                        </div>
                        <div class="kpi_card">
                            <span>Computador com mais alertas de perigo na última semana</span><br>
                            <span class="critico_text" id="kpiPerigo">$Computador 001</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- FIM DIV CENTRAL -->
            <!-- COMECO DIV INFERIOR -->
            <div class="div_inferior">
                <div class="titulo_inferior">
                    <img src="../assets/imgs/wifi_Icon.png" alt="">
                    <span class="text_inferior">Uso Geral da Rede</span>
                </div>
                <div class="kpis_rede">
                    <div class="kpi_card_rede">
                        <span>Latência</span><br>
                        <span>Status: <span class="seguro_text">Seguro</span></span>
                    </div>
                    <div class="kpi_card_dowload">
                        <div class="icon_dowload">
                            <br>
                            <img style="width: 50%;" src="../assets/imgs/dowload.png" alt="">
                        </div>
                        <div class="text_dowload">
                            <br>
                            <span>Dowload</span><br>
                            <span>Status:<span class="critico_text"> Alta Utilização</span></span><br>
                            <span>Usado: $100MB</span>
                            <br>
                        </div>
                    </div>
                    <div class="kpi_card_dowload">
                        <div class="icon_dowload">
                            <br>
                            <img style="width: 50%;" src="../assets/imgs/upload.png" alt="">
                        </div>
                        <div class="text_dowload">
                            <br>
                            <span>Upload</span><br>
                            <span>Status:<span class="seguro_text"> Seguro</span></span><br>
                            <span>Usado: $10MB</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

</body>

</html>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    nomeFuncionario.innerHTML = sessionStorage.nome;
    emailFuncionario.innerHTML = sessionStorage.email;
    kpiAtencao.innerHTML = ((sessionStorage.KPIAtenção == 0) ? 'Nenhum Computador em Atenção na última Semana' : ` Computador com Id: ${sessionStorage.KPIAtenção}` ); 
    kpiPerigo.innerHTML = ((sessionStorage.KPIPerigo == 0) ? 'Nenhum Computador em Perigo na última Semana' :` Computador com Id: ${sessionStorage.KPIPerigo}` ); 
    
    var cards_container = document.getElementById('cards_container')

    // Stacked
    function graficoStacked() {
        obterDadosGraficoStacked('Stacked')
    }

    // Meia Lua
    function graficoMeiaLua() {
        var idAndarVar = Number(andares.value.split('-')[1]);
        obterDadosGraficoMeiaLua(idAndarVar, 'meia_lua')
    }

    // Notificações
    function limparNotificacaoAndar(){
        cards_container.innerText = " ";
    }

    function obterdados() {
        var idAndarVar = Number(andares.value.split('-')[1]);
        buscarImportanciaMaquina(idAndarVar);
    }

    // KPI
    function obterKpis(){
        buscarKPIAtencao();
        buscarKPIPerigo();
    }
</script>